<?xml version="1.0" encoding="UTF-8"?>
<!DOCTYPE mapper PUBLIC "-//mybatis.org//DTD Mapper 3.0//EN"
    "http://mybatis.org/dtd/mybatis-3-mapper.dtd">

<!--Mapperとxmlのマッピング-->
<mapper namespace="com.example.demo.repository.BulletinBoardMapper">
  <!--スレッド登録-->
  <insert id="insertThread" >
  insert into threads(
    thread_name,
    created_at,
    updated_at
  ) values (
    #{threadName},
    CURRENT_TIMESTAMP,
    CURRENT_TIMESTAMP
  )
  </insert>
  
  <!-- オートインクリメントの値を取得 -->
  <select id="selectAutoIncrement" resultType="int">
  select max(thread_number) from threads;
  </select>
  
  <!-- メッセージ登録 -->
  <insert id="insertMessage">
  insert into messages(
  	thread_number,
  	message,
  	created_at,
  	created_name,
  	updated_at
  ) values (
  	#{threadNumber},
  	#{message},
  	CURRENT_TIMESTAMP,
  	#{contributor},
  	CURRENT_TIMESTAMP
  )
  </insert>
</mapper>
